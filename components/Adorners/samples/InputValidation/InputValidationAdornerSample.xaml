<!--  Licensed to the .NET Foundation under one or more agreements. The .NET Foundation licenses this file to you under the MIT license. See the LICENSE file in the project root for more information.  -->
<Page x:Class="AdornersExperiment.Samples.InputValidation.InputValidationAdornerSample"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
      xmlns:local="using:AdornersExperiment.Samples.InputValidation"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
      xmlns:muxc="using:Microsoft.UI.Xaml.Controls"
      xmlns:ui="using:CommunityToolkit.WinUI"
      mc:Ignorable="d">

    <Page.Resources>
        <local:InputValidationAdornerResources />
        <!--
            Inner style copied here from above for convenience of the sample
            <Grid Visibility="{x:Bind HasValidationFailed, Mode=OneWay}" >
                <Rectangle Margin="-4"
                           HorizontalAlignment="Stretch"
                           VerticalAlignment="Stretch"
                           RadiusX="4"
                           RadiusY="4"
                           Stroke="Red"
                           StrokeThickness="1"/>

                <muxc:InfoBadge Width="20"
                                MinHeight="20"
                                Margin="0,0,-32,0"
                                HorizontalAlignment="Right"
                                VerticalAlignment="Center"
                                Background="{ThemeResource SystemFillColorCriticalBrush}">
                    <muxc:InfoBadge.IconSource>
                        <muxc:FontIconSource FontFamily="{ThemeResource SymbolThemeFontFamily}"
                                             Glyph="&#xF13C;" />
                    </muxc:InfoBadge.IconSource>
                    <ToolTipService.ToolTip>
                        <ToolTip Content="{x:Bind ValidationMessage, Mode=OneWay}" />
                    </ToolTipService.ToolTip>
                </muxc:InfoBadge>
            </Grid>
        -->
    </Page.Resources>

    <StackPanel HorizontalAlignment="Left"
                Spacing="16">
        <TextBlock Text="Please fill out the form below and click Submit:" />

        <!--  We set the DataContext here for our Adorner to retrieve the IEditableObject reference  -->
        <!--  We use TwoWay binding to ensure the updates from the Adorner are reflected in the ViewModel  -->
        <TextBox DataContext="{x:Bind ViewModel}"
                 Header="Enter your first name:"
                 PlaceholderText="First name"
                 Text="{x:Bind ViewModel.FirstName, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
            <ui:AdornerLayer.Xaml>
                <local:InputValidationAdorner PropertyName="FirstName"
                                              Style="{StaticResource DefaultInputValidationAdornerStyle}" />
            </ui:AdornerLayer.Xaml>
        </TextBox>

        <TextBox DataContext="{x:Bind ViewModel}"
                 Header="Enter your last name:"
                 PlaceholderText="Last name"
                 Text="{x:Bind ViewModel.LastName, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
            <ui:AdornerLayer.Xaml>
                <local:InputValidationAdorner PropertyName="LastName"
                                              Style="{StaticResource DefaultInputValidationAdornerStyle}" />
            </ui:AdornerLayer.Xaml>
        </TextBox>

        <TextBox DataContext="{x:Bind ViewModel}"
                 Header="Enter your email address:"
                 PlaceholderText="Email"
                 Text="{x:Bind ViewModel.Email, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
            <ui:AdornerLayer.Xaml>
                <local:InputValidationAdorner PropertyName="Email"
                                              Style="{StaticResource DefaultInputValidationAdornerStyle}" />
            </ui:AdornerLayer.Xaml>
        </TextBox>

        <TextBox DataContext="{x:Bind ViewModel}"
                 Header="Enter your phone number:"
                 PlaceholderText="Phone number"
                 Text="{x:Bind ViewModel.PhoneNumber, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
            <ui:AdornerLayer.Xaml>
                <local:InputValidationAdorner PropertyName="PhoneNumber"
                                              Style="{StaticResource DefaultInputValidationAdornerStyle}" />
            </ui:AdornerLayer.Xaml>
        </TextBox>

        <muxc:NumberBox DataContext="{x:Bind ViewModel}"
                        Header="Enter your age:"
                        LargeChange="10"
                        PlaceholderText="Age"
                        SmallChange="1"
                        SpinButtonPlacementMode="Inline"
                        Value="{x:Bind ViewModel.Age, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
            <ui:AdornerLayer.Xaml>
                <local:InputValidationAdorner PropertyName="Age"
                                              Style="{StaticResource DefaultInputValidationAdornerStyle}" />
            </ui:AdornerLayer.Xaml>
        </muxc:NumberBox>

        <!--  Submit command  -->
        <Button Command="{x:Bind ViewModel.SubmitCommand}"
                Content="Submit" />
    </StackPanel>
</Page>
